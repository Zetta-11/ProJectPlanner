<!DOCTYPE html>
<html lang="en" xmlns:sec="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/registration.css">
    <link rel="stylesheet" href="/css/general.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/footer.css">
    <title>ProJectPlanner - Registration</title>
</head>

<body>
<header>
    <div class="header-left">
        <img src="/images/mainLogo.png" alt="Logo">
        <h1>ProJectPlanner</h1>
    </div>
    <nav>
        <a href="/home">Home</a>
        <a href="/projects">Projects</a>
        <a href="/account">My Account</a>
        <a href="/about">About</a>
    </nav>
    <form class="header-right" th:action="@{/logout}" method="post">
        <button sec:authorize="isAuthenticated()" class="logout-button" type="submit">Logout</button>
    </form>
</header>

<div class="registration-container">
    <h2>Register</h2>
    <form class="registration-form" action="/registration" method="post" th:object="${user}">
        <input type="text" name="login" placeholder="Email (Username)">
        <span th:if="${#fields.hasErrors('login')}" class="error-message" style="color: red"
              th:errors="*{login}"></span>
        <span th:if="${userExistsError}" class="error-message"
              style="color: red">User with this login already exists.</span>

        <input type="password" name="password" placeholder="Password" required>
        <span th:if="${#fields.hasErrors('password')}" class="error-message" style="color: red"
              th:errors="*{password}"></span>

        <input type="password" name="confirmPassword" placeholder="Confirm Password" required>
        <span th:if="${passwordMismatch}" class="error-message" style="color: red">Passwords do not match.</span>

        <select class="form-control" name="project" required>
            <option value="" disabled selected>Select Project</option>
            <option th:each="project : ${allProjects}" th:value="${project.id}" th:text="${project.name}">
        </select>

        <button type="submit" class="btn btn-primary">Register</button>
    </form>
    <br>
    <div>
        <p>Already has an account? <a href="/login">Login here</a>.</p>
    </div>
</div>

<footer>
    <p>&copy; Klim Menkov 2024 ProJectPlanner. All rights reserved.</p>
</footer>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>